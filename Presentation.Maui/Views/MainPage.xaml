<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             
             xmlns:models="clr-namespace:Business.Models;assembly=Business"
             xmlns:viewmodels="clr-namespace:Presentation.Maui.ViewModels"
             x:DataType="{x:Type viewmodels:MainViewModel}"
             xmlns:inputLayout="clr-namespace:Syncfusion.Maui.Toolkit.TextInputLayout;assembly=Syncfusion.Maui.Toolkit"
             




    x:Class="Presentation.Maui.MainPage">

    

    <ScrollView>
        <Grid RowDefinitions="auto, *" Margin="30">

            <VerticalStackLayout Grid.Row="0">

                <inputLayout:SfTextInputLayout  Hint="Firstname"
                                                ContainerType="Outlined">
                    <Entry Text="{Binding ContactForm.FirstName}" />
                </inputLayout:SfTextInputLayout>

                <inputLayout:SfTextInputLayout  Hint="Lastname"
                                ContainerType="Outlined">
                    <Entry Text="{Binding ContactForm.LastName}" />
                </inputLayout:SfTextInputLayout>



                <inputLayout:SfTextInputLayout  Hint="Email"
                                ContainerType="Outlined">
                    <Entry Text="{Binding ContactForm.Email}" />
                </inputLayout:SfTextInputLayout>

                <inputLayout:SfTextInputLayout  Hint="Phone number"
                                ContainerType="Outlined">
                    <Entry Text="{Binding ContactForm.PhoneNumber}" />
                </inputLayout:SfTextInputLayout>

                <inputLayout:SfTextInputLayout  Hint="Street address"
                                ContainerType="Outlined">
                    <Entry Text="{Binding ContactForm.StreetAddress}" />
                </inputLayout:SfTextInputLayout>

                <inputLayout:SfTextInputLayout  Hint="Postal code"
                                ContainerType="Outlined">
                    <Entry Text="{Binding ContactForm.PostalCode}" />
                </inputLayout:SfTextInputLayout>

                <inputLayout:SfTextInputLayout  Hint="City"
                                ContainerType="Outlined">
                    <Entry Text="{Binding ContactForm.City}" />
                </inputLayout:SfTextInputLayout>

                <Button Command="{Binding AddContactCommand}" Text="Add to list" Margin="0,40,0,20" Padding="0,10" />
            </VerticalStackLayout>

            <CollectionView Grid.Row="1" ItemsSource="{Binding ContactList}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="{x:Type models:ContactModel}">
                        <Grid ColumnDefinitions="*, auto" Padding="0, 0, 0, 20" >
                            <VerticalStackLayout Grid.Column="0">
                                <Label FontSize="18">
                                    <Label.Text>
                                        <MultiBinding StringFormat="{}{0} {1}">
                                            <Binding Path="FirstName" />
                                            <Binding Path="LastName" />
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                                <Label Text="{Binding PhoneNumber}" FontSize="15" Margin="0, 0, 20, 0"/>
                                <Label Text="{Binding Email}" FontSize="15"/>
                                <Label Text="{Binding StreetAddress}" FontSize="13"/>
                                <Label FontSize="13">
                                    <Label.Text>
                                        <MultiBinding StringFormat="{}{0} {1}">
                                            <Binding Path="PostalCode" />
                                            <Binding Path="City" />
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                            </VerticalStackLayout>

                            <Grid Grid.Column="1" RowDefinitions="*" ColumnDefinitions="*">
                                <Button Text="📝"
                                        ToolTipProperties.Text="Edit Contact"
                                        VerticalOptions="Start" />
                                
                                <Button CommandParameter="{Binding .}"
                                        Command="{Binding Path=DeleteContactCommand, Source={RelativeSource AncestorType={x:Type viewmodels:MainViewModel}}}"
                                        Text="❌"
                                        ToolTipProperties.Text="Delete Contact"
                                        VerticalOptions="End" />
                            </Grid>

                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </ScrollView>

</ContentPage>
