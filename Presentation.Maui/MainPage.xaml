<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             
             xmlns:models="clr-namespace:Business.Models;assembly=Business"
             xmlns:viewmodels="clr-namespace:Presentation.Maui.ViewModels"
             x:DataType="{x:Type viewmodels:MainViewModel}"
             
             x:Class="Presentation.Maui.MainPage">

    <ScrollView>
        <Grid RowDefinitions="auto, *" Margin="20">

            <VerticalStackLayout Grid.Row="0">
                <Label Text="First Name" />
                <Entry Text="{Binding ContactForm.FirstName}" />

                <Label Text="Last Name" />
                <Entry Text="{Binding ContactForm.LastName}" />

                <Label Text="Email" />
                <Entry Text="{Binding ContactForm.Email}" />

                <Label Text="Phonenumber" />
                <Entry Text="{Binding ContactForm.PhoneNumber}" />

                <Label Text="Street Address" />
                <Entry Text="{Binding ContactForm.StreetAddress}" />

                <Label Text="Postal Code" />
                <Entry Text="{Binding ContactForm.PostalCode}" />

                <Label Text="City" />
                <Entry Text="{Binding ContactForm.City}" />

                <Button Command="{Binding AddContactToListCommand}" Text="Add to list" Margin="0,20,0,20" Padding="0,10" />
            </VerticalStackLayout>

            <CollectionView Grid.Row="1" ItemsSource="{Binding ContactList}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="{x:Type models:ContactModel}">
                        <Grid ColumnDefinitions="*, auto" Padding="0, 0, 0, 20" >
                            <VerticalStackLayout Grid.Column="0">
                                <Label FontSize="18">
                                    <Label.Text>
                                        <MultiBinding StringFormat="{}{0} {1}">
                                            <Binding Path="FirstName" />
                                            <Binding Path="LastName" />
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                                <Label Text="{Binding PhoneNumber}" FontSize="15" Margin="0, 0, 20, 0"/>
                                <Label Text="{Binding Email}" FontSize="15"/>
                                <Label Text="{Binding StreetAddress}" FontSize="13"/>
                                <Label FontSize="13">
                                    <Label.Text>
                                        <MultiBinding StringFormat="{}{0} {1}">
                                            <Binding Path="PostalCode" />
                                            <Binding Path="City" />
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                            </VerticalStackLayout>

                            <Grid Grid.Column="1" RowDefinitions="*" ColumnDefinitions="*">
                                <Button Text="📝" ToolTipProperties.Text="Edit Contact" VerticalOptions="Start" />
                                <Button Text="❌" ToolTipProperties.Text="Delete Contact" VerticalOptions="End" />
                            </Grid>

                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </ScrollView>

</ContentPage>
